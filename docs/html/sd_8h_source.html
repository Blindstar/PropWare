<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>PropWare: sd.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">PropWare
   
   </div>
   <div id="projectbrief">Generic C library files for the Parallax Propeller microcontroller</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">sd.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="sd_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00018"></a>00018 <span class="preprocessor">#ifndef SD_H_</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#define SD_H_</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;propeller.h&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="PropWare_8h.html">PropWare.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="spi_8h.html">spi.h</a>&gt;</span>
<a name="l00026"></a>00026 
<a name="l00058"></a>00058 <span class="comment">//#define SD_DEBUG</span>
<a name="l00059"></a>00059 <span class="comment">//#define SD_VERBOSE</span>
<a name="l00060"></a>00060 <span class="comment">//#define SD_VERBOSE_BLOCKS</span>
<a name="l00061"></a><a class="code" href="group__sd__public.html#ga453e7feb2ddf9256c6b5ab9399b12abc">00061</a> <span class="preprocessor">#define SD_SHELL</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILE_WRITE</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>
<a name="l00064"></a>00064 <span class="preprocessor">#define SD_LINE_SIZE            16</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="preprocessor">#define SD_SECTOR_SIZE          512</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span><span class="preprocessor">#define SD_DEFAULT_SPI_FREQ     1800000</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a>00068 <span class="comment">// File modes</span>
<a name="l00069"></a>00069 <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00070"></a>00070     SD_FILE_MODE_R,
<a name="l00071"></a>00071 <span class="preprocessor">#ifdef SD_FILE_WRITE</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>    SD_FILE_MODE_R_PLUS,
<a name="l00073"></a>00073     SD_FILE_MODE_A,
<a name="l00074"></a>00074     SD_FILE_MODE_A_PLUS,
<a name="l00075"></a>00075 <span class="preprocessor">#endif</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>    SD_FILE_MODES
<a name="l00077"></a>00077 } sd_file_mode;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="comment">// File positions</span>
<a name="l00080"></a>00080 <span class="keyword">typedef</span> <span class="keyword">enum</span> {
<a name="l00081"></a>00081     SEEK_SET,  <span class="comment">// Beginning of the file</span>
<a name="l00082"></a>00082     SEEK_CUR,  <span class="comment">// Current position in the file</span>
<a name="l00083"></a>00083     SEEK_END   <span class="comment">// End of the file</span>
<a name="l00084"></a>00084 } file_pos;
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="comment">// Error codes - preceded by SPI</span>
<a name="l00087"></a>00087 <span class="preprocessor">#define SD_ERRORS_BASE          16</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span><span class="preprocessor">#define SD_ERRORS_LIMIT         32</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span><span class="preprocessor">#define SD_INVALID_CMD          SD_ERRORS_BASE + 0</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span><span class="preprocessor">#define SD_READ_TIMEOUT         SD_ERRORS_BASE + 1</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span><span class="preprocessor">#define SD_INVALID_NUM_BYTES    SD_ERRORS_BASE + 2</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span><span class="preprocessor">#define SD_INVALID_RESPONSE     SD_ERRORS_BASE + 3</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span><span class="preprocessor">#define SD_INVALID_INIT         SD_ERRORS_BASE + 4</span>
<a name="l00094"></a>00094 <span class="preprocessor"></span><span class="preprocessor">#define SD_INVALID_FILESYSTEM   SD_ERRORS_BASE + 5</span>
<a name="l00095"></a>00095 <span class="preprocessor"></span><span class="preprocessor">#define SD_INVALID_DAT_STRT_ID  SD_ERRORS_BASE + 6</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILENAME_NOT_FOUND   SD_ERRORS_BASE + 7</span>
<a name="l00097"></a>00097 <span class="preprocessor"></span><span class="preprocessor">#define SD_EMPTY_FAT_ENTRY      SD_ERRORS_BASE + 8</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span><span class="preprocessor">#define SD_CORRUPT_CLUSTER      SD_ERRORS_BASE + 9</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span><span class="preprocessor">#define SD_INVALID_PTR_ORIGIN   SD_ERRORS_BASE + 10</span>
<a name="l00100"></a>00100 <span class="preprocessor"></span><span class="preprocessor">#define SD_ENTRY_NOT_FILE       SD_ERRORS_BASE + 11</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span><span class="preprocessor">#define SD_INVALID_FILENAME     SD_ERRORS_BASE + 12</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span><span class="preprocessor">#define SD_INVALID_FAT_APPEND   SD_ERRORS_BASE + 13</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILE_ALREADY_EXISTS  SD_ERRORS_BASE + 14</span>
<a name="l00104"></a>00104 <span class="preprocessor"></span><span class="preprocessor">#define SD_INVALID_FILE_MODE    SD_ERRORS_BASE + 15</span>
<a name="l00105"></a>00105 <span class="preprocessor"></span><span class="preprocessor">#define SD_TOO_MANY_FATS        SD_ERRORS_BASE + 16</span>
<a name="l00106"></a>00106 <span class="preprocessor"></span><span class="preprocessor">#define SD_READING_PAST_EOC     SD_ERRORS_BASE + 17</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILE_WITHOUT_BUFFER  SD_ERRORS_BASE + 18</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span><span class="preprocessor">#define SD_ERRORS_SIZE          SD_ERRORS_BASE + 19</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span>
<a name="l00110"></a>00110 <span class="comment">// Forward declarations for buffers and files</span>
<a name="l00111"></a>00111 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__sd__buffer.html">_sd_buffer</a> <a class="code" href="struct__sd__buffer.html">sd_buffer</a>;
<a name="l00112"></a>00112 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__sd__file.html">_sd_file</a> <a class="code" href="struct__sd__file.html">sd_file</a>;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="comment">// In case the system is low on RAM, allow the external program to access the</span>
<a name="l00115"></a>00115 <span class="comment">// generic buffer.</span>
<a name="l00116"></a>00116 <span class="keyword">extern</span> <a class="code" href="struct__sd__buffer.html">sd_buffer</a> g_sd_buf;
<a name="l00117"></a>00117 
<a name="l00134"></a>00134 uint8_t <a class="code" href="group__sd__public.html#gaa6efc61bbfb71aeb8dddb042cbd5541a" title="Initialize SD card communication over SPI for 3.3V configuration.">SDStart</a> (<span class="keyword">const</span> uint32_t mosi, <span class="keyword">const</span> uint32_t miso, <span class="keyword">const</span> uint32_t sclk,
<a name="l00135"></a>00135         <span class="keyword">const</span> uint32_t cs, <span class="keyword">const</span> uint32_t freq);
<a name="l00136"></a>00136 
<a name="l00142"></a>00142 uint8_t <a class="code" href="group__sd__public.html#ga0146d4e47541912a908b9dc4930d9ea0" title="Mount either FAT16 or FAT32 filesystem.">SDMount</a> (<span class="keywordtype">void</span>);
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 <span class="preprocessor">#ifdef SD_FILE_WRITE</span>
<a name="l00145"></a>00145 <span class="preprocessor"></span>
<a name="l00152"></a>00152 uint8_t <a class="code" href="group__sd__public.html#ga6f278e19bcf845741a8336bc8e050280" title="Stop all SD activities and write any modified buffers.">SDUnmount</a> (<span class="keywordtype">void</span>);
<a name="l00153"></a>00153 <span class="preprocessor">#endif</span>
<a name="l00154"></a>00154 <span class="preprocessor"></span>
<a name="l00162"></a>00162 uint8_t <a class="code" href="group__sd__public.html#ga0c924f7c0df8b77d4dbcc11fa74da9a1" title="Change the current working directory to *f (similar to &#39;cd f&#39;)">SDchdir</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *d);
<a name="l00163"></a>00163 
<a name="l00189"></a>00189 uint8_t <a class="code" href="group__sd__public.html#ga4302407556850cf38bd79d2e06b9435e" title="Open a file with a given name and load its information into the file pointer.">SDfopen</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="struct__sd__file.html">sd_file</a> *f, <span class="keyword">const</span> sd_file_mode mode);
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="preprocessor">#ifdef SD_FILE_WRITE</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span>
<a name="l00199"></a>00199 uint8_t <a class="code" href="group__sd__public.html#gad0d4956ac718de7fa9bd8f87dbfafdf5" title="Close a given file.">SDfclose</a> (<a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00200"></a>00200 
<a name="l00213"></a>00213 uint8_t <a class="code" href="group__sd__public.html#gaad45d15b997bfeba9e2bb00707c93db0" title="Insert a character into a given file.">SDfputc</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> c, <a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00214"></a>00214 
<a name="l00226"></a>00226 uint8_t <a class="code" href="group__sd__public.html#ga393d8159266baef0a0b7a373395ace54" title="Insert a c-string into a file.">SDfputs</a> (<span class="keywordtype">char</span> *s, <a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00227"></a>00227 <span class="preprocessor">#endif</span>
<a name="l00228"></a>00228 <span class="preprocessor"></span>
<a name="l00244"></a>00244 <span class="keywordtype">char</span> <a class="code" href="group__sd__public.html#gaf78a6c92a069f20cfe6e4d2f8b49e9f7" title="Read one character from the currently opened file.">SDfgetc</a> (<a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00245"></a>00245 
<a name="l00260"></a>00260 <span class="keywordtype">char</span> * <a class="code" href="group__sd__public.html#ga527ac922c698a6de67e96e9b9f056dd5" title="Read a line from a file until either &#39;size&#39; characters have been read or a newline is found; Paramete...">SDfgets</a> (<span class="keywordtype">char</span> s[], uint32_t size, <a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00261"></a>00261 
<a name="l00272"></a>00272 <span class="keyword">inline</span> uint8_t <a class="code" href="group__sd__public.html#gad0344fe0a330b064623744ca704382f0" title="Determine whether the read pointer has reached the end of the file.">SDfeof</a> (<a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00273"></a>00273 
<a name="l00287"></a>00287 uint8_t <a class="code" href="group__sd__public.html#ga1335b6fd2dba25b64c92f25b5179c240" title="Set the read pointer for a given file to the position &#39;origin + offset&#39;.">SDfseekr</a> (<a class="code" href="struct__sd__file.html">sd_file</a> *f, <span class="keyword">const</span> int32_t offset, <span class="keyword">const</span> file_pos origin);
<a name="l00288"></a>00288 
<a name="l00302"></a>00302 uint8_t <a class="code" href="group__sd__public.html#gace39d4fd7f8c062c05553d9adc09cfba" title="Set the write pointer for a given file to the position &#39;origin + offset&#39;.">SDfseekw</a> (<a class="code" href="struct__sd__file.html">sd_file</a> *f, <span class="keyword">const</span> int32_t offset, <span class="keyword">const</span> file_pos origin);
<a name="l00303"></a>00303 
<a name="l00313"></a>00313 <span class="keyword">inline</span> file_pos <a class="code" href="group__sd__public.html#gaf2afd1b19c70fd863559d542d67e3717" title="Retrieve the current position of the read pointer.">SDftellr</a> (<span class="keyword">const</span> <a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00314"></a>00314 
<a name="l00324"></a>00324 <span class="keyword">inline</span> file_pos <a class="code" href="group__sd__public.html#ga146019999773d7bdceea8e7a224ac781" title="Retrieve the current position of the write pointer.">SDftellw</a> (<span class="keyword">const</span> <a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00325"></a>00325 
<a name="l00326"></a>00326 <span class="preprocessor">#ifdef SD_SHELL</span>
<a name="l00327"></a>00327 <span class="preprocessor"></span><span class="comment">// Shell definitions</span>
<a name="l00328"></a>00328 <span class="preprocessor">#define SD_SHELL_INPUT_LEN          64</span>
<a name="l00329"></a>00329 <span class="preprocessor"></span><span class="preprocessor">#define SD_SHELL_CMD_LEN            8</span>
<a name="l00330"></a>00330 <span class="preprocessor"></span><span class="preprocessor">#define SD_SHELL_ARG_LEN            32</span>
<a name="l00331"></a>00331 <span class="preprocessor"></span><span class="preprocessor">#define SD_SHELL_EXIT               (&quot;exit&quot;)</span>
<a name="l00332"></a>00332 <span class="preprocessor"></span><span class="preprocessor">#define SD_SHELL_LS                 (&quot;ls&quot;)</span>
<a name="l00333"></a>00333 <span class="preprocessor"></span><span class="preprocessor">#define SD_SHELL_CAT                (&quot;cat&quot;)</span>
<a name="l00334"></a>00334 <span class="preprocessor"></span><span class="preprocessor">#define SD_SHELL_CD                 (&quot;cd&quot;)</span>
<a name="l00335"></a>00335 <span class="preprocessor"></span><span class="preprocessor">#define SD_SHELL_TOUCH              (&quot;touch&quot;)</span>
<a name="l00336"></a>00336 <span class="preprocessor"></span>
<a name="l00346"></a>00346 uint8_t <a class="code" href="group__sd__public.html#ga57382ad7c6b2cf5eb51399f157f85146" title="Provide the user with a very basic Unix-like shell. The following commands are available to the user:...">SD_Shell</a> (<a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00347"></a>00347 
<a name="l00357"></a>00357 uint8_t <a class="code" href="group__sd__public.html#ga6798337a4d5c8b3b26d656ad4b437906" title="List the contents of a directory on the screen (similar to &#39;ls .&#39;)">SD_Shell_ls</a> (<span class="keywordtype">void</span>);
<a name="l00358"></a>00358 
<a name="l00368"></a>00368 uint8_t <a class="code" href="group__sd__public.html#ga529e166e843180d7b6faa0b06096580f" title="Dump the contents of a file to the screen (similar to &#39;cat f&#39;);.">SD_Shell_cat</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00369"></a>00369 
<a name="l00377"></a>00377 uint8_t <a class="code" href="group__sd__public.html#gadf4f410c8c353e6a84f77e1df1b9e424" title="Change the current working directory to *f (similar to &#39;cd f&#39;);.">SD_Shell_cd</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *d);
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 <span class="preprocessor">#ifdef SD_FILE_WRITE</span>
<a name="l00380"></a>00380 <span class="preprocessor"></span>
<a name="l00387"></a>00387 uint8_t <a class="code" href="group__sd__public.html#gad2b78b0a9efcd14f43c2ab9e38d80e7f" title="Create a new file, do not open it.">SD_Shell_touch</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> name[]);
<a name="l00388"></a>00388 <span class="preprocessor">#endif</span>
<a name="l00389"></a>00389 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>
<a name="l00391"></a>00391 <span class="preprocessor">#if (defined SD_VERBOSE || defined SD_VERBOSE_BLOCKS)</span>
<a name="l00392"></a>00392 <span class="preprocessor"></span>
<a name="l00400"></a>00400 uint8_t SDPrintHexBlock (uint8_t *dat, uint16_t bytes);
<a name="l00401"></a>00401 <span class="preprocessor">#endif</span>
<a name="l00402"></a>00402 <span class="preprocessor"></span>
<a name="l00405"></a>00405 <span class="comment">/*******************************************</span>
<a name="l00406"></a>00406 <span class="comment"> *** Private SD Definitions &amp; Prototypes ***</span>
<a name="l00407"></a>00407 <span class="comment"> *******************************************/</span>
<a name="l00411"></a>00411 <span class="preprocessor">#if (defined SD_DEBUG || defined SD_VERBOSE || defined SD_VERBOSE_BLOCKS || \</span>
<a name="l00412"></a>00412 <span class="preprocessor">defined SD_SHELL)</span>
<a name="l00413"></a>00413 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00414"></a>00414 <span class="preprocessor">#endif</span>
<a name="l00415"></a>00415 <span class="preprocessor"></span>
<a name="l00416"></a>00416 <span class="comment">// SPI config</span>
<a name="l00417"></a>00417 <span class="preprocessor">#define SD_SPI_INIT_FREQ            200000          // Run SD initialization at 200 kHz</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span><span class="preprocessor">#define SD_SPI_MODE                 SPI_MODE_0</span>
<a name="l00419"></a>00419 <span class="preprocessor"></span><span class="preprocessor">#define SD_SPI_BITMODE              SPI_MSB_FIRST</span>
<a name="l00420"></a>00420 <span class="preprocessor"></span>
<a name="l00421"></a>00421 <span class="comment">// Misc. SD Definitions</span>
<a name="l00422"></a>00422 <span class="preprocessor">#define SD_WIGGLE_ROOM              10000</span>
<a name="l00423"></a>00423 <span class="preprocessor"></span><span class="preprocessor">#define SD_RESPONSE_TIMEOUT         CLKFREQ/10      // Wait 0.1 seconds for a response before timing out</span>
<a name="l00424"></a>00424 <span class="preprocessor"></span><span class="preprocessor">#define SD_SECTOR_SIZE_SHIFT        9</span>
<a name="l00425"></a>00425 <span class="preprocessor"></span>
<a name="l00426"></a>00426 <span class="comment">// SD Commands</span>
<a name="l00427"></a>00427 <span class="preprocessor">#define SD_CMD_IDLE                 0x40 + 0        // Send card into idle state</span>
<a name="l00428"></a>00428 <span class="preprocessor"></span><span class="preprocessor">#define    SD_CMD_SDHC              0x40 + 8        // Set SD card version (1 or 2) and voltage level range</span>
<a name="l00429"></a>00429 <span class="preprocessor"></span><span class="preprocessor">#define SD_CMD_RD_CSD               0x40 + 9        // Request &quot;Card Specific Data&quot; block contents</span>
<a name="l00430"></a>00430 <span class="preprocessor"></span><span class="preprocessor">#define SD_CMD_RD_CID               0x40 + 10       // Request &quot;Card Identification&quot; block contents</span>
<a name="l00431"></a>00431 <span class="preprocessor"></span><span class="preprocessor">#define SD_CMD_RD_BLOCK             0x40 + 17       // Request data block</span>
<a name="l00432"></a>00432 <span class="preprocessor"></span><span class="preprocessor">#define SD_CMD_WR_BLOCK             0x40 + 24       // Write data block</span>
<a name="l00433"></a>00433 <span class="preprocessor"></span><span class="preprocessor">#define SD_CMD_READ_OCR             0x40 + 58       // Request &quot;Operating Conditions Register&quot; contents</span>
<a name="l00434"></a>00434 <span class="preprocessor"></span><span class="preprocessor">#define SD_CMD_APP                  0x40 + 55       // Inform card that following instruction is application specific</span>
<a name="l00435"></a>00435 <span class="preprocessor"></span><span class="preprocessor">#define SD_CMD_WR_OP                0x40 + 41       // Send operating conditions for SDC</span>
<a name="l00436"></a>00436 <span class="preprocessor"></span><span class="comment">// SD Arguments</span>
<a name="l00437"></a>00437 <span class="preprocessor">#define SD_CMD_VOLT_ARG             0x000001AA</span>
<a name="l00438"></a>00438 <span class="preprocessor"></span><span class="preprocessor">#define SD_ARG_LEN                  5</span>
<a name="l00439"></a>00439 <span class="preprocessor"></span>
<a name="l00440"></a>00440 <span class="comment">// SD CRCs</span>
<a name="l00441"></a>00441 <span class="preprocessor">#define SD_CRC_IDLE                 0x95</span>
<a name="l00442"></a>00442 <span class="preprocessor"></span><span class="preprocessor">#define SD_CRC_SDHC                 0x87</span>
<a name="l00443"></a>00443 <span class="preprocessor"></span><span class="preprocessor">#define SD_CRC_ACMD                 0x77</span>
<a name="l00444"></a>00444 <span class="preprocessor"></span><span class="preprocessor">#define SD_CRC_OTHER                0x01</span>
<a name="l00445"></a>00445 <span class="preprocessor"></span>
<a name="l00446"></a>00446 <span class="comment">// SD Responses</span>
<a name="l00447"></a>00447 <span class="preprocessor">#define SD_RESPONSE_IDLE            0x01</span>
<a name="l00448"></a>00448 <span class="preprocessor"></span><span class="preprocessor">#define SD_RESPONSE_ACTIVE          0x00</span>
<a name="l00449"></a>00449 <span class="preprocessor"></span><span class="preprocessor">#define SD_DATA_START_ID            0xFE</span>
<a name="l00450"></a>00450 <span class="preprocessor"></span><span class="preprocessor">#define SD_RESPONSE_LEN_R1          1</span>
<a name="l00451"></a>00451 <span class="preprocessor"></span><span class="preprocessor">#define SD_RESPONSE_LEN_R3          5</span>
<a name="l00452"></a>00452 <span class="preprocessor"></span><span class="preprocessor">#define    SD_RESPONSE_LEN_R7       5</span>
<a name="l00453"></a>00453 <span class="preprocessor"></span><span class="preprocessor">#define SD_RSPNS_TKN_BITS           0x0f</span>
<a name="l00454"></a>00454 <span class="preprocessor"></span><span class="preprocessor">#define SD_RSPNS_TKN_ACCPT          ((0x02 &lt;&lt; 1) | 1)</span>
<a name="l00455"></a>00455 <span class="preprocessor"></span><span class="preprocessor">#define SD_RSPNS_TKN_CRC            ((0x05 &lt;&lt; 1) | 1)</span>
<a name="l00456"></a>00456 <span class="preprocessor"></span><span class="preprocessor">#define SD_RSPNS_TKN_WR             ((0x06 &lt;&lt; 1) | 1)</span>
<a name="l00457"></a>00457 <span class="preprocessor"></span>
<a name="l00458"></a>00458 <span class="comment">// Boot sector addresses/values</span>
<a name="l00459"></a>00459 <span class="preprocessor">#define SD_FAT_16                   2               // A FAT entry in FAT16 is 2-bytes</span>
<a name="l00460"></a>00460 <span class="preprocessor"></span><span class="preprocessor">#define SD_FAT_32                   4               // A FAT entry in FAT32 is 4-bytes</span>
<a name="l00461"></a>00461 <span class="preprocessor"></span><span class="preprocessor">#define SD_BOOT_SECTOR_ID           0xeb</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span><span class="preprocessor">#define SD_BOOT_SECTOR_ID_ADDR      0</span>
<a name="l00463"></a>00463 <span class="preprocessor"></span><span class="preprocessor">#define SD_BOOT_SECTOR_BACKUP       0x1c6</span>
<a name="l00464"></a>00464 <span class="preprocessor"></span><span class="preprocessor">#define SD_CLUSTER_SIZE_ADDR        0x0d</span>
<a name="l00465"></a>00465 <span class="preprocessor"></span><span class="preprocessor">#define SD_RSVD_SCTR_CNT_ADDR       0x0e</span>
<a name="l00466"></a>00466 <span class="preprocessor"></span><span class="preprocessor">#define SD_NUM_FATS_ADDR            0x10</span>
<a name="l00467"></a>00467 <span class="preprocessor"></span><span class="preprocessor">#define SD_ROOT_ENTRY_CNT_ADDR      0x11</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span><span class="preprocessor">#define SD_TOT_SCTR_16_ADDR         0x13</span>
<a name="l00469"></a>00469 <span class="preprocessor"></span><span class="preprocessor">#define SD_FAT_SIZE_16_ADDR         0x16</span>
<a name="l00470"></a>00470 <span class="preprocessor"></span><span class="preprocessor">#define SD_TOT_SCTR_32_ADDR         0x20</span>
<a name="l00471"></a>00471 <span class="preprocessor"></span><span class="preprocessor">#define SD_FAT_SIZE_32_ADDR         0x24</span>
<a name="l00472"></a>00472 <span class="preprocessor"></span><span class="preprocessor">#define SD_ROOT_CLUSTER_ADDR        0x2c</span>
<a name="l00473"></a>00473 <span class="preprocessor"></span><span class="preprocessor">#define SD_FAT12_CLSTR_CNT          4085</span>
<a name="l00474"></a>00474 <span class="preprocessor"></span><span class="preprocessor">#define SD_FAT16_CLSTR_CNT          65525</span>
<a name="l00475"></a>00475 <span class="preprocessor"></span>
<a name="l00476"></a>00476 <span class="comment">// FAT file/directory values</span>
<a name="l00477"></a>00477 <span class="preprocessor">#define SD_FILE_ENTRY_LENGTH        32              // An entry in a directory uses 32 bytes</span>
<a name="l00478"></a>00478 <span class="preprocessor"></span><span class="preprocessor">#define SD_DELETED_FILE_MARK        0xe5            // Marks that a file has been deleted here, continue to the next entry</span>
<a name="l00479"></a>00479 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILE_NAME_LEN            8               // 8 characters in the standard file name</span>
<a name="l00480"></a>00480 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILE_EXTENSION_LEN       3               // 3 character file name extension</span>
<a name="l00481"></a>00481 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILENAME_STR_LEN         SD_FILE_NAME_LEN + SD_FILE_EXTENSION_LEN + 2</span>
<a name="l00482"></a>00482 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILE_ATTRIBUTE_OFFSET    0x0B            // Byte of a file entry to store attribute flags</span>
<a name="l00483"></a>00483 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILE_START_CLSTR_LOW     0x1a            // Starting cluster number</span>
<a name="l00484"></a>00484 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILE_START_CLSTR_HIGH    0x14            // High word (16-bits) of the starting cluster number (FAT32 only)</span>
<a name="l00485"></a>00485 <span class="preprocessor"></span><span class="preprocessor">#define SD_FILE_LEN_OFFSET          0x1c            // Length of a file in bytes</span>
<a name="l00486"></a>00486 <span class="preprocessor"></span><span class="preprocessor">#define SD_FREE_CLUSTER             0               // Cluster is unused</span>
<a name="l00487"></a>00487 <span class="preprocessor"></span><span class="preprocessor">#define SD_RESERVED_CLUSTER         1</span>
<a name="l00488"></a>00488 <span class="preprocessor"></span><span class="preprocessor">#define SD_RSVD_CLSTR_VAL_BEG       -15             // First reserved cluster value</span>
<a name="l00489"></a>00489 <span class="preprocessor"></span><span class="preprocessor">#define SD_RSVD_CLSTR_VAL_END       -9              // Last reserved cluster value</span>
<a name="l00490"></a>00490 <span class="preprocessor"></span><span class="preprocessor">#define SD_BAD_CLUSTER              -8              // Cluster is corrupt</span>
<a name="l00491"></a>00491 <span class="preprocessor"></span><span class="preprocessor">#define SD_EOC_BEG                  -7              // First marker for end-of-chain (end of file entry within FAT)</span>
<a name="l00492"></a>00492 <span class="preprocessor"></span><span class="preprocessor">#define SD_EOC_END                  -1              // Last marker for end-of-chain</span>
<a name="l00493"></a>00493 <span class="preprocessor"></span><span class="comment">// FAT file attributes (definitions with trailing underscore represent character for a cleared attribute flag)</span>
<a name="l00494"></a>00494 <span class="preprocessor">#define SD_READ_ONLY                BIT_0</span>
<a name="l00495"></a>00495 <span class="preprocessor"></span><span class="preprocessor">#define SD_READ_ONLY_CHAR           &#39;r&#39;</span>
<a name="l00496"></a>00496 <span class="preprocessor"></span><span class="preprocessor">#define SD_READ_ONLY_CHAR_          &#39;w&#39;</span>
<a name="l00497"></a>00497 <span class="preprocessor"></span><span class="preprocessor">#define SD_HIDDEN_FILE              BIT_1</span>
<a name="l00498"></a>00498 <span class="preprocessor"></span><span class="preprocessor">#define SD_HIDDEN_FILE_CHAR         &#39;h&#39;</span>
<a name="l00499"></a>00499 <span class="preprocessor"></span><span class="preprocessor">#define SD_HIDDEN_FILE_CHAR_        &#39;.&#39;</span>
<a name="l00500"></a>00500 <span class="preprocessor"></span><span class="preprocessor">#define SD_SYSTEM_FILE              BIT_2</span>
<a name="l00501"></a>00501 <span class="preprocessor"></span><span class="preprocessor">#define SD_SYSTEM_FILE_CHAR         &#39;s&#39;</span>
<a name="l00502"></a>00502 <span class="preprocessor"></span><span class="preprocessor">#define SD_SYSTEM_FILE_CHAR_        &#39;.&#39;</span>
<a name="l00503"></a>00503 <span class="preprocessor"></span><span class="preprocessor">#define SD_VOLUME_ID                BIT_3</span>
<a name="l00504"></a>00504 <span class="preprocessor"></span><span class="preprocessor">#define SD_VOLUME_ID_CHAR           &#39;v&#39;</span>
<a name="l00505"></a>00505 <span class="preprocessor"></span><span class="preprocessor">#define SD_VOLUME_ID_CHAR_          &#39;.&#39;</span>
<a name="l00506"></a>00506 <span class="preprocessor"></span><span class="preprocessor">#define SD_SUB_DIR                  BIT_4</span>
<a name="l00507"></a>00507 <span class="preprocessor"></span><span class="preprocessor">#define SD_SUB_DIR_CHAR             &#39;d&#39;</span>
<a name="l00508"></a>00508 <span class="preprocessor"></span><span class="preprocessor">#define SD_SUB_DIR_CHAR_            &#39;f&#39;</span>
<a name="l00509"></a>00509 <span class="preprocessor"></span><span class="preprocessor">#define SD_ARCHIVE                  BIT_5</span>
<a name="l00510"></a>00510 <span class="preprocessor"></span><span class="preprocessor">#define SD_ARCHIVE_CHAR             &#39;a&#39;</span>
<a name="l00511"></a>00511 <span class="preprocessor"></span><span class="preprocessor">#define SD_ARCHIVE_CHAR_            &#39;.&#39;</span>
<a name="l00512"></a>00512 <span class="preprocessor"></span>
<a name="l00513"></a>00513 <span class="comment">// File constants</span>
<a name="l00514"></a>00514 <span class="preprocessor">#ifndef SD_EOF</span>
<a name="l00515"></a>00515 <span class="preprocessor"></span><span class="preprocessor">#define SD_EOF                      ((uint8_t) -1)  // System dependent - may need to be defined elsewhere</span>
<a name="l00516"></a>00516 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00517"></a>00517 <span class="preprocessor"></span>
<a name="l00518"></a>00518 <span class="preprocessor">#define SD_FOLDER_ID                ((uint8_t) -1)  // Signal that the contents of a buffer are a directory</span>
<a name="l00519"></a><a class="code" href="struct__sd__buffer.html">00519</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="struct__sd__buffer.html">_sd_buffer</a> {
<a name="l00520"></a>00520     uint8_t buf[SD_SECTOR_SIZE];  <span class="comment">// Buffer for SD card contents</span>
<a name="l00521"></a>00521     uint8_t id;  <span class="comment">// Buffer ID - determine who owns the current information</span>
<a name="l00522"></a>00522     uint32_t curClusterStartAddr;  <span class="comment">// Store the current cluster&#39;s starting sector number</span>
<a name="l00523"></a>00523     uint8_t curSectorOffset;  <span class="comment">// Store the current sector offset from the beginning of the cluster</span>
<a name="l00524"></a>00524     uint32_t curAllocUnit;  <span class="comment">// Store the current allocation unit</span>
<a name="l00525"></a>00525     uint32_t nextAllocUnit;  <span class="comment">// Look-ahead at the next FAT entry</span>
<a name="l00526"></a>00526 <span class="preprocessor">#ifdef SD_FILE_WRITE</span>
<a name="l00527"></a>00527 <span class="preprocessor"></span>    uint8_t mod; <span class="comment">// When set, the currently loaded sector has been modified since it was read from</span>
<a name="l00528"></a>00528                  <span class="comment">// the SD card</span>
<a name="l00529"></a>00529 <span class="preprocessor">#endif</span>
<a name="l00530"></a>00530 <span class="preprocessor"></span>};
<a name="l00531"></a>00531 
<a name="l00532"></a><a class="code" href="struct__sd__file.html">00532</a> <span class="keyword">struct </span><a class="code" href="struct__sd__file.html">_sd_file</a> {
<a name="l00533"></a>00533     <a class="code" href="struct__sd__buffer.html">sd_buffer</a> *buf;
<a name="l00534"></a>00534     uint8_t id;  <span class="comment">// determine if the buffer is owned by this file</span>
<a name="l00535"></a>00535     file_pos wPtr;
<a name="l00536"></a>00536     file_pos rPtr;
<a name="l00537"></a>00537     sd_file_mode mode;
<a name="l00538"></a>00538     uint32_t length;
<a name="l00539"></a>00539     uint32_t maxSectors; <span class="comment">// Maximum number of sectors currently allocated to a file</span>
<a name="l00540"></a>00540     uint8_t mod; <span class="comment">// When the length of a file is changed, this variable will be set, otherwise cleared</span>
<a name="l00541"></a>00541     uint32_t firstAllocUnit;  <span class="comment">// File&#39;s starting allocation unit</span>
<a name="l00542"></a>00542     uint32_t curSector; <span class="comment">// like curSectorOffset, but does not reset upon loading a new cluster</span>
<a name="l00543"></a>00543     uint32_t curCluster;  <span class="comment">// like curSector, but for allocation units</span>
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     uint32_t dirSectorAddr; <span class="comment">// Which sector of the SD card contains this file&#39;s meta-data</span>
<a name="l00546"></a>00546     uint16_t fileEntryOffset;
<a name="l00547"></a>00547 };
<a name="l00548"></a>00548 
<a name="l00549"></a>00549 <span class="comment">/***********************************</span>
<a name="l00550"></a>00550 <span class="comment"> *** Private Function Prototypes ***</span>
<a name="l00551"></a>00551 <span class="comment"> ***********************************/</span>
<a name="l00560"></a>00560 uint8_t <a class="code" href="group__sd__private.html#ga8dc156ec08bf1638f5e5690ce1d50955" title="Send a command and argument over SPI to the SD card.">SDSendCommand</a> (<span class="keyword">const</span> uint8_t cmd, <span class="keyword">const</span> uint32_t arg,
<a name="l00561"></a>00561         <span class="keyword">const</span> uint8_t crc);
<a name="l00562"></a>00562 
<a name="l00572"></a>00572 uint8_t <a class="code" href="group__sd__private.html#ga8beda4a4b082ddbc6373d209a8b2848e" title="Receive response and data from SD card over SPI.">SDGetResponse</a> (<span class="keyword">const</span> uint8_t numBytes, uint8_t *dat);
<a name="l00573"></a>00573 
<a name="l00583"></a>00583 uint8_t <a class="code" href="group__sd__private.html#ga86870ec9efe9cec23e365499247edd85" title="Receive data from SD card via SPI.">SDReadBlock</a> (uint16_t bytes, uint8_t *dat);
<a name="l00584"></a>00584 
<a name="l00593"></a>00593 uint8_t <a class="code" href="group__sd__private.html#ga7b37d2be5c0daf0e1f56d75b7f20490c" title="Write data to SD card via SPI.">SDWriteBlock</a> (uint16_t bytes, uint8_t *dat);
<a name="l00594"></a>00594 
<a name="l00603"></a>00603 uint8_t <a class="code" href="group__sd__private.html#ga9cb0901da7dfeeb211dd30671d7640a4" title="Read SD_SECTOR_SIZE-byte data block from SD card.">SDReadDataBlock</a> (uint32_t address, uint8_t *dat);
<a name="l00604"></a>00604 
<a name="l00613"></a>00613 uint8_t <a class="code" href="group__sd__private.html#ga96ae7f7f33c4f6f3f1a90450fa70fe20" title="Write SD_SECTOR_SIZE-byte data block to SD card.">SDWriteDataBlock</a> (uint32_t address, uint8_t *dat);
<a name="l00614"></a>00614 
<a name="l00624"></a>00624 uint16_t <a class="code" href="group__sd__private.html#ga09f0fce8aede67604aef626c5279a3a7" title="Return byte-reversed 16-bit variable (SD cards store bytes little-endian therefore we must reverse th...">SDReadDat16</a> (<span class="keyword">const</span> uint8_t buf[]);
<a name="l00625"></a>00625 
<a name="l00635"></a>00635 uint32_t <a class="code" href="group__sd__private.html#ga1d0dd969067387e8002c03483871aa47" title="Return byte-reversed 32-bit variable (SD cards store bytes little-endian therefore we must reverse th...">SDReadDat32</a> (<span class="keyword">const</span> uint8_t buf[]);
<a name="l00636"></a>00636 
<a name="l00637"></a>00637 <span class="preprocessor">#ifdef SD_FILE_WRITE</span>
<a name="l00638"></a>00638 <span class="preprocessor"></span>
<a name="l00647"></a>00647 <span class="keywordtype">void</span> <a class="code" href="group__sd__private.html#ga555404275cd1337a0af1d886cef46d94" title="Write a byte-reversed 16-bit variable (SD cards store bytes little-endian therefore we must reverse t...">SDWriteDat16</a> (uint8_t buf[], <span class="keyword">const</span> uint16_t dat);
<a name="l00648"></a>00648 
<a name="l00658"></a>00658 <span class="keywordtype">void</span> <a class="code" href="group__sd__private.html#ga089b5f011ba661fcbf84e5c27372625f" title="Write a byte-reversed 32-bit variable (SD cards store bytes little-endian therefore we must reverse t...">SDWriteDat32</a> (uint8_t buf[], <span class="keyword">const</span> uint32_t dat);
<a name="l00659"></a>00659 <span class="preprocessor">#endif</span>
<a name="l00660"></a>00660 <span class="preprocessor"></span>
<a name="l00670"></a>00670 <span class="comment">// TODO: Implement this (more than simply returning root directory)</span>
<a name="l00671"></a>00671 <span class="comment">// TODO: Allow for paths outside the current directory</span>
<a name="l00672"></a>00672 uint32_t <a class="code" href="group__sd__private.html#ga9b7b559a9ed2c91ca0c9d1f96f5c9a92" title="Find and return the starting sector&#39;s address for a directory path given in a c-string. Use Unix-style path names (like /foo/bar/) !!!NOTE!!! Not yet implemented!">SDGetSectorFromPath</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *path);
<a name="l00673"></a>00673 
<a name="l00682"></a>00682 uint32_t <a class="code" href="group__sd__private.html#gaf3115c47cc913a11540b0abf3b670bce" title="Find and return the starting sector&#39;s address for a given allocation unit (note - not cluster)...">SDGetSectorFromAlloc</a> (uint32_t allocUnit);
<a name="l00683"></a>00683 
<a name="l00693"></a>00693 uint8_t <a class="code" href="group__sd__private.html#ga0459bc40447b918a8abf1ebb57a67bb4" title="Read an entry from the FAT.">SDGetFATValue</a> (<span class="keyword">const</span> uint32_t fatEntry, uint32_t *value);
<a name="l00694"></a>00694 
<a name="l00704"></a>00704 uint8_t <a class="code" href="group__sd__private.html#ga90dc04d8c4e081ab946e91e6fd06e377" title="Find the next sector in the FAT, directory, or file. When it is found, load it into the appropriate g...">SDLoadNextSector</a> (<a class="code" href="struct__sd__buffer.html">sd_buffer</a> *buf);
<a name="l00705"></a>00705 
<a name="l00719"></a>00719 uint8_t <a class="code" href="group__sd__private.html#gafcdb4e5820c4eb65fde1e932aa66e150" title="Load a requested sector into the buffer independent of the current sector or cluster.">SDLoadSectorFromOffset</a> (<a class="code" href="struct__sd__file.html">sd_file</a> *f, <span class="keyword">const</span> uint32_t offset);
<a name="l00720"></a>00720 
<a name="l00733"></a>00733 uint8_t <a class="code" href="group__sd__private.html#gab285932fa74b07785e7f749ab7954605" title="Read the next sector from SD card into memory  When the final sector of a cluster is finished...">SDIncCluster</a> (<a class="code" href="struct__sd__buffer.html">sd_buffer</a> *buf);
<a name="l00734"></a>00734 
<a name="l00749"></a>00749 <span class="keywordtype">void</span> <a class="code" href="group__sd__private.html#ga58df1c4a441a09559fdeefa8830b2ba3" title="Read the standard length name of a file entry. If an extension exists, a period will be inserted befo...">SDGetFilename</a> (<span class="keyword">const</span> uint8_t *buf, <span class="keywordtype">char</span> *filename);
<a name="l00750"></a>00750 
<a name="l00766"></a>00766 uint8_t <a class="code" href="group__sd__private.html#gab95a217c5576c70a2c0e0e49cacf21cd" title="Find a file entry (file or sub-directory)">SDFind</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *filename, uint16_t *fileEntryOffset);
<a name="l00767"></a>00767 
<a name="l00775"></a>00775 uint8_t <a class="code" href="group__sd__private.html#ga5bf131742ae27e3a88ef3e1de6f53342" title="Reload the sector currently in use by a given file.">SDReloadBuf</a> (<a class="code" href="struct__sd__file.html">sd_file</a> *f);
<a name="l00776"></a>00776 
<a name="l00777"></a>00777 <span class="preprocessor">#ifdef SD_FILE_WRITE</span>
<a name="l00778"></a>00778 <span class="preprocessor"></span>
<a name="l00794"></a>00794 uint32_t <a class="code" href="group__sd__private.html#gaa8845c0c0998c4a31711acf0505b6551" title="Find the first empty allocation unit in the FAT.">SDFindEmptySpace</a> (<span class="keyword">const</span> uint8_t restore);
<a name="l00795"></a>00795 
<a name="l00796"></a>00796 <span class="comment">/* @brief   Enlarge a file or directory by one cluster</span>
<a name="l00797"></a>00797 <span class="comment"> *</span>
<a name="l00798"></a>00798 <span class="comment"> * @param   *buf    Address of the buffer (containing information for a file or</span>
<a name="l00799"></a>00799 <span class="comment"> *                  directory) to be enlarged</span>
<a name="l00800"></a>00800 <span class="comment"> *</span>
<a name="l00801"></a>00801 <span class="comment"> * @return  Returns 0 upon success, error code otherwise</span>
<a name="l00802"></a>00802 <span class="comment"> */</span>
<a name="l00803"></a>00803 uint8_t SDExtendFAT (<a class="code" href="struct__sd__buffer.html">sd_buffer</a> *buf);
<a name="l00804"></a>00804 
<a name="l00814"></a>00814 uint8_t <a class="code" href="group__sd__private.html#ga3898013effb1d9efe33cd113843e20e1" title="Allocate space for a new file.">SDCreateFile</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> uint16_t *fileEntryOffset);
<a name="l00815"></a>00815 <span class="preprocessor">#endif</span>
<a name="l00816"></a>00816 <span class="preprocessor"></span>
<a name="l00817"></a>00817 <span class="preprocessor">#if (defined SD_SHELL || defined SD_VERBOSE)</span>
<a name="l00818"></a>00818 <span class="preprocessor"></span><span class="comment">// TODO: Document this</span>
<a name="l00819"></a>00819 <span class="keyword">inline</span> <span class="keywordtype">void</span> SDPrintFileEntry (<span class="keyword">const</span> uint8_t *file, <span class="keywordtype">char</span> filename[]);
<a name="l00820"></a>00820 
<a name="l00821"></a>00821 <span class="comment">// TODO: Document this</span>
<a name="l00822"></a>00822 <span class="keywordtype">void</span> SDPrintFileAttributes (<span class="keyword">const</span> uint8_t flag);
<a name="l00823"></a>00823 <span class="preprocessor">#endif</span>
<a name="l00824"></a>00824 <span class="preprocessor"></span>
<a name="l00829"></a>00829 <span class="preprocessor">#endif </span><span class="comment">/* SD_H_ */</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 22 2013 13:08:37 for PropWare by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
